# Моделювання даних

Процес проектування структури бази даних: від ідеї до реалізації.

```
Вимога бізнесу → Модель → База даних
```

---

## 3 рівні моделей

| Рівень | Що описує | Для кого | Питання |
|---|---|---|---|
| **Концептуальна** | Об'єкти та зв'язки | Замовник / Бізнес | Які сутності існують? Як вони пов'язані? |
| **Логічна** | Структура, залежності | Аналітик | Як структуровано? Які ключі та зв'язки? |
| **Фізична** | Реалізація | Розробник | Який SQL код? Які типи даних та індекси? |

---

## Концептуальна модель

Найвищий рівень — лише сутності та зв'язки, без деталей.

**Що є:**
- Сутності
- Зв'язки між ними

**Чого немає:**
- Атрибутів
- Ключів
- Типів даних

**Приклад (Бібліотека):**
```
[Читач] --- бере --- [Книга]
[Книга] --- написана --- [Автор]
```

---

## Логічна модель

Середній рівень — додаємо деталі до концептуальної моделі.

**Що є:**
- Сутності з атрибутами
- Первинні ключі (PK)
- Зовнішні ключі (FK)
- Типи зв'язків (1:1, 1:N, M:N)

**Чого немає:**
- Конкретних типів даних (VARCHAR, INT тощо)
- Індексів
- SQL коду

**Приклад:**
```
Читач (reader_id PK, name, email)
Книга (book_id PK, name, author_id FK)
Автор (author_id PK, name)
```

---

## Фізична модель

Найнижчий рівень — конкретна реалізація на обраній DBMS.

```sql
CREATE TABLE readers (
  reader_id INT PRIMARY KEY AUTO_INCREMENT,
  name      VARCHAR(100) NOT NULL,
  email     VARCHAR(255) UNIQUE
);
```

Тут вже є конкретні типи даних, обмеження, індекси — все що потрібно для реального SQL.

---

## ER-модель (Entity-Relationship)

Спосіб візуалізації структури БД. Складається з 3 компонентів:

| Компонент | Що позначає | Як виглядає |
|---|---|---|
| **Entity (Сутність)** | Об'єкт реального світу | Прямокутник |
| **Attribute (Атрибут)** | Властивість сутності | Овал або всередині прямокутника |
| **Relationship (Зв'язок)** | Як сутності пов'язані | Лінія або ромб |

---

## Типи зв'язків

### 1:1 — Один до одного
Один запис пов'язаний рівно з одним записом іншої таблиці.
```
Людина ——— Паспорт
```

### 1:N — Один до багатьох
Один запис пов'язаний з багатьма записами іншої таблиці.
```
Автор ——— Книга (автор може написати багато книг)
```

### M:N — Багато до багатьох
Багато записів пов'язані з багатьма записами іншої таблиці.
```
Студенти ——— Курси
```

> M:N **завжди** розділяється через проміжну таблицю (junction table):
> ```
> Студенти ——— Студент_Курс ——— Курси
> ```

---

## Нотації ER-моделей

### 1. Chen (Класична)
Використовується в академічному середовищі.

```
[Читач] ——— ◇ Бере ◇ ——— [Книга]
```

| Елемент | Позначення |
|---|---|
| Сутність | Прямокутник |
| Атрибут | Овал |
| Зв'язок | Ромб |

---

### 2. Crow's Foot (Найпопулярніша)
Використовується в бізнесі та практичній розробці.

| Зв'язок | Позначення |
|---|---|
| Рівно один | `——\|——` |
| Один до багатьох | `——\|<——` |
| Нуль або один до багатьох | `——o<——` |
| Багато до багатьох | `——><——` |

---

### 3. UML
Використовується в програмуванні.

| Позначення | Значення |
|---|---|
| `1` | Рівно один |
| `*` | Багато |
| `0..1` | Нуль або один |
| `0..*` | Нуль або багато |
| `1..*` | Один або багато |

```
Читач 1 ————————* Книга
```
